# Testnet upgrade: v1.3.0

import { Callout } from "/src/components/callout";

Instructions for the testnet upgrade axelar-core `v1.3.0`.

The release for the upgrade can be found [here](https://github.com/axelarnetwork/axelar-core/releases/tag/v1.3.0).

<Callout type="warning" emoji="⚠️">
  `axelard` must be built with `go-1.25` for this release.

  Node operators using binaries need to update `wasmvm` from `v1.5.8` to `v2.2.4` [libwasmvm.x86_64.so](https://github.com/CosmWasm/wasmvm/releases/tag/v2.2.4), and add the folder containing the library to `LD_LIBRARY_PATH`.
  
  If using the community node setup scripts, please update to the latest commit on `main` first.
  `wasmvm` lib will be auto-downloaded to `$AXELARD_HOME/lib` but you'll need to add it to `LD_LIBRARY_PATH` before running the script.


  For verifiers, prepare to update [ampd](#ampd).
</Callout>


## About the v1.3.0 upgrade

The `v1.3.0` upgrade is required to support the Axelar Network's upgrade to [Cosmos SDK v0.5.0](https://cosmos-docs.mintlify.app/sdk/v0.50/build). This upgrade will allow for faster block times on Axelar as well as support for the latest security features of the Cosmos SDK.

### Major Features
TODO

## Upgrade Instructions


1. If you're a validator or have delegated to one, please vote for the upgrade proposal via

```bash
axelard tx gov vote TODO_PROPOSAL_ID yes --from validator
```

2. Wait for the proposed upgrade block, `TODO_UPGRADE_HEIGHT`. Your node will panic at that block height with a log: `{"level":"error","module":"consensus","err":"UPGRADE \"v1.3.0\" NEEDED at height: TODO_UPGRADE_HEIGHT",`. Stop your node after chain halt.

```bash
pkill -f 'axelard start'
# Validators need to also stop vald/tofnd
pkill -f 'vald-start'
pkill -f tofnd
```

3. Backup the state:

```bash
cp -r ~/.axelar_testnet/.core/data ~/.axelar-lisbon-3-upgrade-1.3.0/.core/data
```

<Callout type="warning" emoji="⚠️">
  Caution: If you backup the entire folder, `~/.axelar_testnet/.core`, that'll
  also include your private keys (inside `config` and `keyring-file`
  subfolders). That can be dangerous if anyone gets access to your backups. We
  recommend backing up keys separately when you first create your node, and then
  excluding them from any data backups.
</Callout>

4. Lower the `timeout_commit` config in `.axelar/config/config.toml` from `5s` to `1s`.
5. Restart your `axelard` node with the new `v1.3.0` build as well as `ampd` with the new `v1.13.1` binaries.
6. If you're a validator also restart `vald` with `v1.3.0` and `tofnd` with `v1.0.1`. TODO confirm tofnd version

Example using join scripts in [axelarate-community git repo](https://github.com/axelarnetwork/axelarate-community):

```bash
# in axelarate-community repo
git checkout main
git pull
KEYRING_PASSWORD="pw-1" ./scripts/node.sh -n testnet -a v1.3.0
# For validators, restart vald/tofnd
KEYRING_PASSWORD="pw-1" TOFND_PASSWORD="pw-2" ./scripts/validator-tools-host.sh -n testnet -a v1.3.0 -q v1.0.1
```

## Ampd

For verifiers, a new `ampd` [upgrade](https://github.com/axelarnetwork/axelar-contract-deployments/blob/main/releases/ampd/2025-11-17-ampd-v1.13.1.md) is required to support `axelard v1.3.0`   The `ampd` upgrade must be done **after**  completing the `axelard` upgrade.

### Instructions

Restart `ampd` with the new binary after deploying axelard `v1.3`. The relevant `ampd` release can be found [here](https://github.com/axelarnetwork/axelar-amplifier/releases/tag/ampd-v1.13.1).

**Important**: If you are upgrading directly from ampd v1.12.x, you need to do the correct adjustments to the config file according to the [ampd v1.13.0 release doc].

## Troubleshooting

If you encounter hash error ensure you have libwasm v2.2.4 which can be obtained from https://github.com/CosmWasm/wasmvm/releases/download/v2.2.4/libwasmvm.x86_64.so. Before restarting node:

1. Ensure system environment variable `LD_LIBRARY_PATH` is specified to correct location if using binary. For docker image no change is necessar