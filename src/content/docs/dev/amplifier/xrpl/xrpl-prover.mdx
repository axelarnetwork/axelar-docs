# XRPL Prover

The XRPL multisig prover contract is designed to facilitate and verify [multisig](https://github.com/commonprefix/axelar-amplifier/blob/xrpl/contracts/xrpl-multisig-prover/src/xrpl_multisig.rs) signing sessions by external verifiers for transactions being sent to XRPL from another blockchain. 

## Construct Trust Proof

To create a proof for a new [trust](#trusts), you can use the `construct_trust_set_proof` function. 

This function takes in the following parameters:

1. `storage`: A mutable reference to the storage object.
1. `gateway`: A reference to the XRPL [gateway](/dev/amplifier/xrpl/xrpl-gateway/) client.
1. `self_address`: The address responsible for signature verification
1. `config`: The [configuration](#config) object for the contract.
1. `token_id`: The ITS [token_id](#/xrpl/xrpl-gateway/#token-id/)

```rust
pub fn construct_trust_set_proof(
    storage: &mut dyn Storage,
    gateway: xrpl_gateway::Client,
    self_address: Addr,
    config: &Config,
    token_id: TokenId,
) -> Result<Response, ContractError> {}
```

When executed this will send a [start signing message](#start-signing-message) to the multisig contract. 

## Construct Ticket Proof



## Construct Payment Proof

construct_ticket_create_proof

construct_payment_proof

## Confirm Transaction Status

confirm_prover_message

confirm_add_reserves_message

## Coordinate Multisig Signing Sessions

## Types

### Trusts

The `XRPLTrustSetTx` represents the raw trust type for XRPL. A trust is 

```rust
pub struct XRPLTrustSetTx {
    pub token: XRPLToken,
    pub account: XRPLAccountId,
    pub fee: u64,
    pub sequence: XRPLSequence,
}
```

### Tickets


### Config

The [config](https://github.com/commonprefix/axelar-amplifier/blob/xrpl/contracts/xrpl-multisig-prover/src/state.rs#L13) for the multisig prover

```rust
pub struct Config {
    pub multisig: Addr,
    pub coordinator: Addr,
    pub gateway: Addr,
    pub signing_threshold: MajorityThreshold,
    pub xrpl_multisig: XRPLAccountId,
    pub voting_verifier: Addr,
    pub service_registry: Addr,
    pub service_name: String,
    pub chain_name: ChainName,
    pub verifier_set_diff_threshold: u32,
    pub xrpl_transaction_fee: u64,
    pub xrpl_base_reserve: u64,
    pub xrpl_owner_reserve: u64,
    pub ticket_count_threshold: u32,
}
```

### Start Signing Message

The message sent to the multisig contract to start a signing session. 

```rust
StartSigningSession {
    verifier_set_id: String,
    msg: HexBinary,
    chain_name: ChainName,
    /// Address of the contract responsible for signature verification.
    sig_verifier: Option<String>,
},
```