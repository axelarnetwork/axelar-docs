# Integrate Custom Token

import { Callout } from "/src/components/callout";

Custom tokens are independently deployed tokens, as opposed to [InterchainTokens](https://github.com/axelarnetwork/interchain-token-service/blob/main/contracts/interchain-token/InterchainToken.sol) deployed via the [Interchain Token Service (ITS)](https://github.com/axelarnetwork/interchain-token-service/blob/main/contracts/InterchainTokenService.sol). These tokens are integrated with ITS across different chains by deploying a Token Manager for each.

Once a custom token has a Token Manager deployed on a given chain, it becomes bridgeable between blockchains that also have a token connected to a Token Manager sharing the same [`interchainTokenId`](/dev/send-tokens/interchain-tokens/intro/#interchain-token-id).

## Install the Axelar ITS Dependency

Install the Axelar [Interchain Token Service (ITS) package](https://www.npmjs.com/package/@axelar-network/interchain-token-service) using npm or any other node package manager:

```bash
npm i @axelar-network/interchain-token-service
```

## Build and Deploy Your ERC-20 Token on Multiple Chains

Build your ERC-20 token and deploy it on multiple chains. You can use a tool like the [Create3 Deployer](/dev/solidity-utilities/#create3-deployer) to ensure your token has the same address across chains.

Example token contract:

```solidity
import "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import "@openzeppelin/contracts/token/ERC20/extensions/ERC20Burnable.sol";

contract MyCustomToken is ERC20, ERC20Burnable {
    constructor(address initialOwner)
        ERC20("My Custom Token", "MCT")
    {
        // Initialization code here
    }

    function mint(address to, uint256 amount) public onlyMinter {
        _mint(to, amount);
    }

    function burn(address from, uint256 amount) public onlyMinter {
        _burn(from, amount);
    }
}
```

This token is a simple implementation of an ERC-20 token that includes the critical functions needed to integrate with ITS: the ability to `mint()` and `burn()` tokens. ITS calls these functions when bridging tokens between chains.

You can also inherit from the [InterchainTokenStandard](https://github.com/axelarnetwork/interchain-token-service/blob/main/contracts/interchain-token/InterchainTokenStandard.sol#L12) so that your token has cross-chain functionality built in, such as the [interchainTransfer()](/dev/send-tokens/interchain-tokens/interchain-transfer/) function.

## Integrate Custom Token with ITS

After deploying your custom tokens on your preferred chains, the next step is to integrate your token with ITS by following these steps:

1. [Register token metadata with the ITS Contract](#register-token-metadata-with-the-its-contract)
2. [Register custom token with the Interchain Token Factory](#register-custom-token-with-the-interchain-token-factory)
3. [Link custom token with the Interchain Token Factory](#link-custom-token-with-the-interchain-token-factory)
4. [Assign the minter role to your token's Token Manager](#assign-the-minter-role-to-your-tokens-token-manager)

### Register Token Metadata with the ITS Contract

Register your token metadata using the [`registerTokenMetadata`](https://github.com/axelarnetwork/interchain-token-service/blob/94677f1072da127a0ee7ff5ab6784dcfe11789e8/contracts/InterchainTokenService.sol#L274) function on the ITS contract. This function registers metadata for a token on the ITS Hub. This metadata is used for scaling linked tokens.
For example, if you are integrating your custom token on chains A, B, and C, you should register token metadata on each chain separately. The `registerTokenMetadata()` function must be called on each chain the token will be linked on. When triggered, a cross-chain message will be sent from your source chain to ITS Hub on Axelar.

```solidity
function registerTokenMetadata(
    address tokenAddress,  // your token address
    uint256 gasValue       // gas value
) external payable {};
```

This function registers metadata for a token on the [ITS Hub](/dev/amplifier/its-hub/introduction/). This metadata is used for scaling linked tokens.

> **Note:** Token metadata must be registered before [`linkToken`](https://github.com/axelarnetwork/interchain-token-service/blob/94677f1072da127a0ee7ff5ab6784dcfe11789e8/contracts/InterchainTokenService.sol#L329) can be called for the corresponding token. This function links a remote token on `destinationChain` to a local token corresponding to the `tokenId` computed from the provided `salt`.

You can see a real example of this function being used in [this transaction on Axelarscan](https://testnet.axelarscan.io/gmp/0xf860bd8802d046fb0c752c355bc73c87e69f701348420c6cbdf82534b87c4822-2), which demonstrates registering a token metadata on BNB.


### Register Custom Token with the Interchain Token Factory

The [registerCustomToken()](https://github.com/axelarnetwork/interchain-token-service/blob/cc6ef7282e18c6b2842cbf1098b06161e38ea32e/contracts/InterchainTokenService.sol#L298) function registers an existing ERC-20 token (your custom token) under an `interchainTokenId` computed from the provided `salt`. Once executed, your token's [token manager](/dev/send-tokens/interchain-tokens/token-manager/) will be deployed for that blockchain. This function only needs to be called once on a single "home" chain that your token is being integrated with, as opposed to the `registerTokenMetadata()` function that must be triggered on each chain the token will be linked on. 

```solidity
function registerCustomToken(
    bytes32 salt, // your unique salt value
    address tokenAddress, // your custom token address
    TokenManagerType tokenManagerType, // token manager type
    address operator // operator address
) external payable returns (bytes32 tokenId) {};
```

This function is called from the [Interchain Token Factory](https://github.com/axelarnetwork/interchain-token-service/blob/main/contracts/InterchainTokenFactory.sol) rather than directly from ITS because the Factory provides additional utility functions and standardized `interchainTokenId`  computation logic.

<Callout emoji="ðŸš¨">
  **Security Note:** The key used to register custom tokens is critical for
  security. If that key is compromised, the token can be compromised across
  multiple chains. - Interchain native tokens can only be deployed to additional
  chains via the same deployer key, so that key must be securely retained. -
  Tokens registered on ITS should be cautious about granting mint/burn
  permissions to other contracts. For example, sharing mint permission with the
  Polygon native bridge is not supported (the Polygon native bridge only looks
  for burns, which ITS usesâ€”potentially allowing duplicate sends).
</Callout>


#### Parameters

1. `salt:` The salt is used to compute the `interchainTokenId`. It must be unique for your token integration to ensure the `interchainTokenId` does not intersect with another `interchainTokenId`. If the combination of the `salt` and `sender` is not unique, the transaction will revert.
1. `tokenAddress`: The token address being linked.
1. `tokenManagerType`: The [type](/dev/send-tokens/interchain-tokens/token-manager/#token-manager-types) of manager being integrated. The value passed in must correspond to the `enum` value of the manager. (ie 2 for [lockUnlock](/dev/send-tokens/interchain-tokens/token-manager/#lockunlock), 4 for [mintBurn](/dev/send-tokens/interchain-tokens/token-manager/#mintburn)).
1. `operator`: The address that will hold the [operator](/dev/send-tokens/interchain-tokens/minter-operator-roles/#operator-role) role for this token's token manager.


You can see a real example of this function being used in [this transaction on BSC Scan](https://testnet.bscscan.com/tx/0xf0c3fbbece17cc12d9de76182540afb4f5c6c47aeca65c40f9d58f71e362dffe), which demonstrates registering a custom token on BNB.


### Link Custom Token with the Interchain Token Factory

To connect your custom tokens between different chains, you can use the [`linkToken`](https://github.com/axelarnetwork/interchain-token-service/blob/94677f1072da127a0ee7ff5ab6784dcfe11789e8/contracts/InterchainTokenFactory.sol#L541) function. This can only be called once your token metadata has been [registered](/dev/send-tokens/interchain-tokens/integrate-custom-token/#register-token-metadata-with-the-its-contract) on both chains and at least one of your tokens has been registered on a given home chain via the [registerCustomToken()](/dev/send-tokens/interchain-tokens/integrate-custom-token/#register-custom-token-with-the-interchain-token-factory) function.

```solidity
function linkToken(
    bytes32 salt, // your unique salt value previously used
    string calldata destinationChain, // destination chain
    bytes calldata destinationTokenAddress, // destination custom token address
    TokenManagerType tokenManagerType, // token manager type
    bytes calldata linkParams, // operator address
    uint256 gasValue // gas value
) external payable returns (bytes32 tokenId) {}
```

This function does the following:

1. It computes a `interchainTokenId` using the same salt you used during token registration.
2. Creates a cross-chain message that instructs the destination chain to deploy a [Token Manager](/dev/send-tokens/interchain-tokens/token-manager/) for your token.
3. Establishes the connection between your tokens across chains by associating them with the same `interchainTokenId`.
4. Sets up the appropriate [Token Manager](/dev/send-tokens/interchain-tokens/token-manager/#token-manager-types) type that defines how tokens will be bridged (lock/unlock, mint/burn, etc.).

You can see a real example of this function being used in [this transaction on Axelarscan](https://testnet.axelarscan.io/gmp/0x11c2a212180d7ea2babe7aceb66c32c1e235cc159bceeb4dd6d04411f4a9669f), which demonstrates linking a token between BNB chain and Avalanche.


### Assign the `minter` Role to Your Token's Token Manager

Transfer the minter / burn role to the [Token Manager](/dev/send-tokens/interchain-tokens/token-manager/) using the [transferMintership()](https://github.com/axelarnetwork/interchain-token-service/blob/main/contracts/utils/Minter.sol#L31) function on your token (or any AccessControls contract that may be handling role management for your token). To retrieve your token manager address, use the `tokenManagerAddress` function on the ITS contract by specifying your `tokenId`. This is role transfer is necessary because when your token is bridged to a destination chain, the `msg.sender` of the `mint()` call will be the Token Manager.


## What's Next

For further examples utilizing the Interchain Token Service, check out the [`axelar-examples`](https://github.com/axelarnetwork/axelar-examples/tree/main/examples/evm) repository on GitHub. There, you can find implementations such as:

- [`its-custom-token`](https://github.com/axelarnetwork/axelar-examples/tree/main/examples/evm/its-custom-token) â€” Demonstrates how to use ITS with a custom token implementation.
- [`its-executable`](https://github.com/axelarnetwork/axelar-examples/tree/main/examples/evm/its-executable) â€” Demonstrates how to deploy an interchain token and send a cross-chain transfer along with a message.
- [`its-mint-burn-from`](https://github.com/axelarnetwork/axelar-examples/tree/main/examples/evm/its-mint-burn-from) â€” Demonstrates how to deploy an interchain token that uses `burnFrom()` instead of `burn()` when bridging tokens.

## Tutorial

For a step-by-step guide on integrating a custom token, check out the [Link Custom Tokens Deployed Across Multiple Chains into Interchain Tokens](/dev/send-tokens/interchain-tokens/developer-guides/link-custom-tokens-deployed-across-multiple-chains-into-interchain-tokens/) tutorial.
